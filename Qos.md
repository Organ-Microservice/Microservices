
Service selection Qos

微服务的分解和组合模式  

1.服务代理模式  
2.服务聚合模式  
一定顺序调用依赖的多个微服务，对依赖的微服务的数据进行组合，加工和转换，最后以一定的形式返回给使用方（聚合服务可以有自己的数据库和缓存）
3.服务串联模式  
服务串联模式类似于一个工作流，最前面的服务1负责接收请求和响应使用方，串联服务后再与服务1交互，随后服务1与服务2交互，最后，从服务2产生的结果经过服务1和串联服务逐个处理后返回给使用方。服务串联模式之间的调用使用同步的RESTful远程调用
4.服务分支模式  
服务分支模式是服务代理模式、服务聚合模式和服务串联模式相结合的产物。
分支服务可以拥有自己的数据库存储，调用多个后端的服务或者服务串联链，然后将结果进行组合处理再返回给客户端。分支服务也可以使用代理模式，简单地调用后端的某个服务或者服务链，然后将返回的数据直接返回给使用方。
5.服务替补消息模式  
同步调用模式在调用的过程中会阻塞线程，如果服务提供方迟迟没有返回，则服务消费方会一直阻塞，在严重情况下会撑满服务的线程池，出现雪崩效应。
因此，在构建微服务架构系统时，通常会梳理核心系统的最小化服务集合，这些核心的系统服务使用同步调用，而其他核心链路以外的服务可以使用异步消息队列进行异步化。
6.  




Qos:  
W3C建议了几十个QoS属性,主要包括价格,可用性,响应时间,可靠性,信誉,性能,安全，吞吐率等。这些特性包括几乎所有的从应用层到网络层的非功能性方面。  
QoS属性的四维定义:价格,可用性,响应时间和可靠性,是多数学者选择组件服务和组合服务时的决策评估基础。  
传感器和客户收集方法目前主要用来收集QoS信息，根据Qos属性的值，形成确定性的Qos模型和混合Qos模型  
基于Qos的服务选择策略：  
本地选择策略：  
这个方法是从每一组候选服务,独立于其他各组选择一个服务。使用特定的使用功能,不同的QoS标准值被映射到单一的实用价值并且具有最大使用价值的服务被挑选出来。
全局选择策略：  
全局选择策略通常需要为整数规划,多选择背包算法和模拟退火等有端到端约束的数学解决问题考虑服务选择的全局服务QoS优化问题。
混合策略：  
局部和全局混合策略的综合优势,例如,局部最优策略的使用优先为每个抽象服务筛选出他们的候选服务,然后再对在使用全局最优策略后还没有被过滤掉的候选服务,进行服务选择。
QoS感知的自动服务组合问题难点主要有以下3个方面：  
（1）可供调用的服务越来越多，并呈现指数增长的趋势，而客户的功能需求也是越来越复杂，组合搜索的难度进一步加大。  
（2）客户对服务的非功能性需求（服务质量QoS）有了更大的期望。服务的QoS能否满足客户的要求成为服务是否获得市场认可的一个重要指标。  
（3）实现服务组合自动化的基础就是实现服务描述信息的概念化，以便机器进行处理，从而提高组合效率。但目前互联网仍处于 Web2.0 的时代，距离 Web3.0（语义Web）尚有一定距离。所以，Web 服务与语义 Web 之间还没有得到有效整合。
